<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel do Professor - Pontua+</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>

    <!-- HEADER -->
    <header class="header">
        <h1>Pontua+</h1>

        <div class="user-info">
            <span id="userName">Carregando...</span>
            <div class="user-avatar" id="userAvatar" onclick="window.location.href='/colaborador-perfil.html'">P</div>
        </div>
    </header>


    <div class="container">

        <!-- MÉTRICAS -->
        <section class="metrics-grid">

            <div class="metric-card">
                <span class="metric-value" id="totalTurmas">2</span>
                <span class="metric-label">Turmas</span>
            </div>

            <div class="metric-card">
                <span class="metric-value" id="totalAlunos">60</span>
                <span class="metric-label">Alunos Ativos</span>
            </div>

            <div class="metric-card">
                <span class="metric-value" id="atividadesPendentes">14</span>
                <span class="metric-label">Atividades Pendentes</span>
            </div>

        </section>


        <!-- LISTAGEM DE TURMAS -->
        <div class="card">
            <h2>Minhas Turmas</h2>

            <table>
                <thead>
                    <tr>
                        <th>Turma</th>
                        <th>Curso</th>
                        <th>Período</th>
                        <th>Alunos</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                
                <tbody id="listaTurmas">
                    <tr>
                        <td>Turma A</td>
                        <td>Logística</td>
                        <td>1º Período</td>
                        <td>28</td>
                        <td>
                            <a href="#" class="btn btn-primary">Acessar</a>
                        </td>
                    </tr>

                    <tr>
                        <td>Turma B</td>
                        <td>RH</td>
                        <td>3º Período</td>
                        <td>32</td>
                        <td>
                            <a href="#" class="btn btn-primary">Acessar</a>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>

    </div>



    <!-- MODAL DE LOGOUT -->
    <div class="modal-overlay" id="logoutModal">
        <div class="modal-content">
            <h3>Deseja realmente sair?</h3>

            <div class="modal-buttons">
                <button class="btn-confirm" onclick="logout()">Sair</button>
                <button class="btn-cancel" onclick="closeLogoutModal()">Cancelar</button>
            </div>
        </div>
    </div>




    <!-- JS -->
    <script>
        function openLogoutModal() {
            document.getElementById("logoutModal").style.display = "flex";
        }

        function closeLogoutModal() {
            document.getElementById("logoutModal").style.display = "none";
        }

        function logout() {
            window.location.href = "/api/auth/logout";
        }
        // Atualizar nome do usuário
        fetch('/api/colaborador/me')
          .then(r => r.json())
          .then(data => {
              document.getElementById('userName').textContent = data.nome;
        
              const iniciais = data.nome
                  .split(' ')
                  .map(n => n[0])
                  .slice(0, 2)
                  .join('');
        
              document.getElementById('userAvatar').textContent = iniciais;
        });

    </script>

</body>
</html>
